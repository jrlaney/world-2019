<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Workshops</title>
	<link rel="stylesheet" href="../CSS/min/main.min.css">
</head>
<body>

</body>
</html>
<div id="workshops-page">
		<div class="pattern-between row expand collapse">
			<div class="col release background-pattern pattern-tartan pattern-small height-small">&nbsp;</div>
			<div class="col release background-pattern pattern-squiggles pattern-small height-small">&nbsp;</div>
			<div class="col release background-pattern pattern-triangles pattern-small height-small">&nbsp;</div>
			<div class="col release background-pattern pattern-round-dots pattern-small height-small">&nbsp;</div>
			<div class="col release background-pattern pattern-stacked-bars pattern-small height-small">&nbsp;</div>
			<div class="col release background-pattern pattern-ribbon pattern-small height-small">&nbsp;</div>
			<div class="col release background-pattern pattern-split-circles pattern-small height-small">&nbsp;</div>
			<div class="col release background-pattern pattern-square-dots pattern-small height-small">&nbsp;</div>
			<div class="col release background-pattern pattern-sparse-triangles pattern-small height-small">&nbsp;</div>
			<div class="col release background-pattern pattern-vertical-bars pattern-small height-small">&nbsp;</div>
		</div>

		<section id="hero-banner" class="background-blue section-sparse-triangles no-padding-bottom">
			<div class="row h-left z-1 padding-bottom-30">
				<div class="col md-10 lg-8">
					<div class="bullet-group large text-left">
						<h1 class="h3 text-bold text-uppercase">Workshops</h1>
						<p class="h4">World 2019 is all about you. That's why we built an agenda packed with workshops specialized for your professional role regardless of your analytics skill set. Learn about the Workshops and Download the resources to continue your learing.</p>
					</div>
				</div>
			</div>
			<div class="pattern-overlay z-0">
				<img alt="null" class="static-pattern pos-top" src="https://custom.cvent.com/83AD54AE0B7F4CBC94A9A945D0A278DA/pix/1a108c61dca149da854f874d67d53aa1.png" width="842" height="569" />
			</div>
		</section>
		<div id="workshop-card" class="background-navy">
			<section id="sessions-list" class="agenda-view">

				<div class="row collapse">
					<div id="agendaCards" class="session-browse col">
						<div class="row">

						</div>
					</div>

					<div class="col">
						<div class="jplist-pagination" data-control-type="pagination" data-control-name="paging" data-control-action="paging" data-items-per-page="15">&nbsp;</div>
						<div class="jplist-no-results jplist-hidden">
							<p>No results found</p>
						</div>
					</div>

				</div>
			</section>
		</div>

		<section id="call-to-action">
			<div class="final-cta">
				<div class="row">
					<img src="http://www.microstrategy.com/Strategy/media/images/logos/branding/world2019-wht-logo.svg" alt="World 2019 white logo" width="0" height="0">
				</div>
				<a class="cta-button large red expand reg-link" href="{[E-RSVP YES URL]}">Register now</a>
			</div>

			<div class="final-date">
				<div class="icon-lockup text-white">
					<img alt="date icon" class="icon" src="https://custom.cvent.com/83AD54AE0B7F4CBC94A9A945D0A278DA/pix/e1bbbb629eb34c34b6462bbb28612345.png" width="32" height="32">
					<p>
						<strong class="text-uppercase text-bold text-white">February</strong>
						4th &ndash; 6th 2019
					</p>
				</div>
				<div class="icon-lockup text-white">
					<img alt="location icon" class="icon" src="https://custom.cvent.com/83AD54AE0B7F4CBC94A9A945D0A278DA/pix/0a1ac4e6db4c4a61834db54ffeebff71.png" width="32" height="32">
					<p>
						<strong class="text-uppercase text-bold text-white">Phoenix, Arizona</strong>
						Phoenix Convention Center
					</p>
				</div>
			</div>
		</section>
	</div>

	{[E-CUSTOM TAG:AGENDA-JPLIST-SCRIPT]}
	{[E-CUSTOM TAG:SCRIPT-REGLINKFIX]}

	<!-- JQuery -->
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jquery.cookie/jquery.cookie.js"></script>

<!-- JPLIST CORE -->
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.core.min.js"></script>

<!-- SORTING -->
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.sort-bundle.min.js"></script>

<!-- JPLIST PAGINATION -->
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.pagination-bundle.min.js"></script>

<!-- JPLIST FILTERING  -->
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.filter-dropdown-bundle.min.js"></script>
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.filter-toggle-bundle.min.js"></script>
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.textbox-filter.min.js"></script>
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.checkbox-dropdown.min.js"></script>
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.radio-buttons-dropdown.min.js"></script>

<!-- JPLIST HISTORY -->
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.history-bundle.min.js"></script>

<!-- JPLIST COUNTER -->
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.counter-control.min.js"></script>

<!-- JPLIST LIST, GRID VIEW -->
<script type="text/javascript" src="https://www.microstrategy.com/CMSTemplates/microstrategy/bower_components/jplist/dist/js/jplist.list-grid-view.min.js"></script>

<!-- LUXON LIBRARY -->
<script type="text/javascript" src="https://moment.github.io/luxon/global/luxon.min.js"></script>

<script type="text/javascript">
var allSessions = [];

function getQueryStringParamValue(key) {
	var url = document.location.href;
	var value = "";

	if (url.indexOf('?') !== -1) {
		var queryStrings = url.substr(url.indexOf('?') + 1);

		if (queryStrings.toLowerCase().indexOf(key.toLowerCase() + "=") !== -1) {
			var queryString = queryStrings.split("&").find(function (element) {
				return element.toLowerCase().split("=")[0] === key.toLowerCase();
			});
			if (typeof queryString !== "undefined")
				value = queryString.substr(queryString.indexOf('=') + 1);
		}
	}
	return value;
}

function classifyText(text) {
	var returnValue = "";
	if ($.isArray(text)) {
		$.each($.unique(text), function (key, value) {
			returnValue += " " + value.toLowerCase().replace(" ", "").replace(/[^a-z]+/g, '');
		});
	} else {
		returnValue = text.toLowerCase().replace(" ", "").replace(/[^a-z]+/g, '');
	}
	return returnValue;
}

function dynamicSort(firstProperty, secondProperty) {
	var firstSortOrder = 1;
	if (firstProperty[0] === "-") {
		firstSortOrder = -1;
		firstProperty = firstProperty.substr(1);
	}

	var secondSortOrder = 1;
	if (secondProperty[0] === "-") {
		secondSortOrder = -1;
		secondProperty = secondProperty.substr(1);
	}

	return function (a, b) {
		var returnValue = 0;
		returnValue = sortComparision(a[firstProperty], b[firstProperty], firstSortOrder);

		if (returnValue === 0) {
			returnValue = sortComparision(a[secondProperty], b[secondProperty], secondSortOrder);
		}

		return returnValue;
	};
}

function sortComparision(aProperty, bProperty, sortOrder) {
	if (aProperty != null && bProperty != null) {
		if (sortOrder === -1) {
			return bProperty.localeCompare(aProperty, undefined, {
				numeric: true,
				sensitivity: 'base'
			});
		} else {
			return aProperty.localeCompare(bProperty, undefined, {
				numeric: true,
				sensitivity: 'base'
			});
		}
	} else if (aProperty != null && bProperty == null) {
		return sortOrder * -1;
	} else if (aProperty == null && bProperty != null) {
		return sortOrder;
	} else
		return 0;
}

Date.prototype.getFormattedTime = function ()
{
	var hours = this.getHours() === 0 ? "12" : this.getHours() > 12 ? this.getHours() - 12 : this.getHours();
	var minutes = (this.getMinutes() < 10 ? "0" : "") + this.getMinutes();
	var ampm = this.getHours() < 12 ? "AM" : "PM";
	var formattedTime = hours + ":" + minutes + " " + ampm;
	return formattedTime;
}

$('document').ready(function ()
{
	var DateTime = luxon.DateTime;
	//Grabbing API Information
	$.get("https://www.microstrategy.com/api/GetAirTableData", function (data) {
		allSessions = data;
		allSessions.sort(dynamicSort("StartDateTime", "Title"));
		var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

		//Creating empty array variables for each of the filtering options
		var sessionType = [];
		var date = [];
		var time = [];
		$.each(allSessions, function (key, value) {
			if (value.Title != null && value.Publish && value.SessionType === "Workshop") {
				var tags = "";
				var luxonStartDateTime;
				var luxonEndDateTime;
				value.SessionType;
				if (value.StartDateTime != null) {
					var startDateTime = new Date(value.StartDateTime);
					tags += "<span class=\"text-label startDate-tag " + classifyText(days[startDateTime.getDay()]) + "\">" + days[startDateTime.getDay()] + "</span>";

					luxonStartDateTime = DateTime.fromISO(value.StartDateTime);
					tags += "<span class=\"text-label startTime-tag " + luxonStartDateTime.hour + luxonStartDateTime.minute + "\">" + luxonStartDateTime.toFormat('t').replace(/[^a-zA-Z0-9: ]+/g, '') + "</span>";
				}

				var description = ((value.MarCommReviewAbstract != null) ? ((value.MarCommReviewAbstract.length > 2000) ? (value.MarCommReviewAbstract.substring(0, 2000) + "...") : value.MarCommReviewAbstract) : "");
				description = description.replace(/\n/g, '<br />');

				var startTime = "TBD";
				if (value.StartDateTime != null)
				{
					startTime = luxonStartDateTime.weekdayShort + " " + luxonStartDateTime.monthShort + " " + luxonStartDateTime.day + " " + luxonStartDateTime.year + "<br/>" + luxonStartDateTime.toFormat('t') ;
				}
				var endTime = "TBD";
				if (value.EndDateTime != null)
				{
					luxonEndDateTime = DateTime.fromISO(value.EndDateTime);
					endTime = luxonEndDateTime.toFormat('t');
				}
				//end first snippet

				//start second snippet

				$("#agendaCards").append("" +
					"<article class=\"grid-item agenda-list\" id=\"" + value.Id + "\">" +
					"<h3 class=\"session-title\">" + value.Title + "</h3>" +
					"<h4 class=\"session-speaker hide\">" + ((value.Speaker != null) ? value.Speaker : "") + "</h4>" +
					"<p class=\"session-type hide\">" + value.SessionType + "</p>" +
					"<p class=\"session-start-time\">" + startTime + " - " + endTime + "</p>" +
					"<div class=\"session-details hide\">" +
					"<p class=\"session-description\">" + description + "</p>" +
					"</div>" +
					"<div class=\"text-label-group tags\">" +
					"<span class=\"tag-heading\">Tags:</span>" + tags + "</div>" +
					"<span class=\"details-expand\">" + 'See Details' + "</span>" +
					"</article>");
			}
		});

		//Sorting items
		time.sort();
		sessionType.sort();


		var distinctTimes = [];
		$.each(time, function (key, value) {
			distinctTimes.push({
				ampm: value.split(" ")[1],
				hrmin: value.split(" ")[0]
			});
		});
		distinctTimes.sort(dynamicSort("ampm", "hrmin"));
		// End of second snippet

		// Third snippet starts here
	}); //end of api pull

	$(document).on('click', '.grid-item', function () {
		$(this).find('.session-details').slideToggle('fast');
		$(this).find('.session-details').toggleClass('hide');
		$(this).find('.session-speaker').toggleClass('hide');
		$(this).find('.session-type').toggleClass('hide');
		var details = $(this).find('.details-expand').text();
		$(this).find('.details-expand').text(details === 'See Details' ? 'Hide Details' : 'See Details');
	});
}); //end document.ready
</script>
	<style>
		.register-btn-bottom {display:none;}
		div.bottom {padding:0;}
		.jplist-hidden { display: none !important; }

		#hero-banner .pattern-overlay .static-pattern.pos-top {
			left:65%;
		}
		#filter-box {background-color:transparent;}
		#currentRoleTxt {
			min-width:100px;
		}

	</style>
